FabWebSocket=function(e,t){this.port=t;this.host=e;var n={};var r;this.getHost=function(){return this.host};this.getPort=function(){return this.port};this.getConn=function(){return this.conn};this.bind=function(e,t){n[e]=n[e]||[];n[e].push(t);return this};this.send=function(e,t){this.conn.send(t);return this};this.connect=function(){var e="ws://"+this.host+":"+this.port;this.conn=window["MozWebSocket"]?new MozWebSocket(e):new WebSocket(e);this.conn.onmessage=function(e){i("message",e.data)};this.conn.onclose=function(){i("close",null)};this.conn.onopen=function(){i("open",null)};this.conn.onerror=function(e){i("error",null)}};this.disconnect=function(){this.conn.close()};var i=function(e,t){var r=n[e];if(typeof r=="undefined")return;for(var i=0;i<r.length;i++){r[i](t)}}}